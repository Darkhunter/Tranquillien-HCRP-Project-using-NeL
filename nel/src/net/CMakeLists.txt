FILE(GLOB SRC *.cpp *.h)
FILE(GLOB HEADERS ../../include/nel/net/*.h)
FILE(GLOB NET_MANAGER "net_manager.*")
LIST(REMOVE_ITEM SRC ${NET_MANAGER})

NL_TARGET_LIB(nelnet ${HEADERS} ${SRC})

IF(WITH_GTK)
  IF(GTK2_FOUND)
    INCLUDE_DIRECTORIES(${GTK2_INCLUDE_DIRS})
    ADD_DEFINITIONS(-DNL_USE_GTK)
  ENDIF(GTK2_FOUND)
ENDIF(WITH_GTK)

IF(WITH_STLPORT)
  TARGET_LINK_LIBRARIES(nelnet ${CMAKE_THREAD_LIBS_INIT})
ENDIF(WITH_STLPORT)

TARGET_LINK_LIBRARIES(nelnet nelmisc)
SET_TARGET_PROPERTIES(nelnet PROPERTIES LINK_INTERFACE_LIBRARIES "")
NL_DEFAULT_PROPS(nelnet "NeL, Library: NeL Net")
NL_ADD_RUNTIME_FLAGS(nelnet)

NL_ADD_LIB_SUFFIX(nelnet)

IF(WITH_PCH)
  ADD_NATIVE_PRECOMPILED_HEADER(nelnet ${CMAKE_CURRENT_SOURCE_DIR}/stdnet.h ${CMAKE_CURRENT_SOURCE_DIR}/stdnet.cpp)
ENDIF(WITH_PCH)

NL_GEN_PC(nel-net.pc)
INSTALL(TARGETS nelnet LIBRARY DESTINATION lib ARCHIVE DESTINATION lib COMPONENT libraries)
