#-----------------------------------------------------------------------------
#Platform specifics

IF(WITH_LUA51)
  FIND_PACKAGE(Lua51 REQUIRED)
ELSE(WITH_LUA51)
  FIND_PACKAGE(Lua50 REQUIRED)
ENDIF(WITH_LUA51)
FIND_PACKAGE(Luabind REQUIRED)
FIND_PACKAGE(CURL REQUIRED)
FIND_PACKAGE(Libwww REQUIRED)
FIND_PACKAGE(ZLIB)
IF(NOT WIN32 AND NOT APPLE)
  FIND_PACKAGE(X11)
ENDIF(NOT WIN32 AND NOT APPLE)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/common/src )
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/common )
SET(RZ_SERVER_SRC_DIR ${CMAKE_CURRENT_SOURCE_DIR}/server/src)

IF(WITH_STATIC)
  FIND_PACKAGE(OpenSSL QUIET)
  IF(OPENSSL_FOUND)
    SET(CURL_INCLUDE_DIRS ${CURL_INCLUDE_DIRS} ${OPENSSL_INCLUDE_DIR})
    SET(CURL_LIBRARIES ${CURL_LIBRARIES} ${OPENSSL_LIBRARIES})
  ENDIF(OPENSSL_FOUND)
  SET(CURL_DEFINITIONS -DCURL_STATICLIB)
ENDIF(WITH_STATIC)

ADD_SUBDIRECTORY(common)

IF(WITH_RYZOM_CLIENT)
  ADD_SUBDIRECTORY(client)
ENDIF(WITH_RYZOM_CLIENT)

IF(WITH_RYZOM_TOOLS)
  ADD_SUBDIRECTORY(tools)
ENDIF(WITH_RYZOM_TOOLS)

IF(WITH_RYZOM_SERVER)
  FIND_PACKAGE(MySQL REQUIRED)
  ADD_SUBDIRECTORY(server)
ENDIF(WITH_RYZOM_SERVER)
